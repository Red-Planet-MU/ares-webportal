{{page-title this.pageTitle}}
<a name="top"></a>

<h1>{{this.model.title}}</h1>
        
<div class="log-wrap">
       
    <div class="log-box">
       
        <p><AnsiFormat @text={{this.model.summary}} /></p>

        {{#if this.model.content_warning}}
        <div class="alert alert-danger"><b>Content Warning:</b> {{this.model.content_warning}}</div>
        {{/if}}

        <p><b>IC Date:</b> {{this.model.icmonth}}/{{this.model.icday}}/{{this.model.icyear}}</p>

        <p><b>OOC Date:</b> {{this.model.date_created}}</p>

        <p><b>Location:</b> {{this.model.location}}</p>


        <p><b>Related Scenes:</b>
           {{#if this.model.related_scenes}}
             {{#each this.model.related_scenes as |related index|}}
                  {{#if (not-eq index 0)}}
                  &nbsp;
                  {{/if}}
                  <LinkTo @route="scene" @model={{related.id}}>{{related.title}}</LinkTo>
              {{/each}}
            {{else}}
               None
            {{/if}}
        </p>
            
        <p>
            <b>Plots: </b>
            {{#if this.model.plots}}
              {{#each this.model.plots as |plot index|}}
                {{#if (not-eq index 0)}}
                &nbsp;
                {{/if}}
                 <a href="/plot/{{plot.id}}">{{plot.title}}</a>
               {{/each}}
            {{else}}
                None
            {{/if}}
        </p>
        
        <p><b>Scene Number:</b> {{this.model.id}}</p>
        
        
        <div>
          
            
        <SceneTypeTag @scene={{this.model}} />
         
        {{#if this.isApproved}}
            <a data-bs-toggle="collapse" href="#comp" class="badge badge-likes"><i class="fa fa-heart" aria-label="CompScene"></i></a>
        {{/if}} 
        
         </div>
         
    </div>
    <div id="comp" class="card-collapse collapse" data-bs-parent="#comp-wrap">
    <br>
    <b>Compliment Scene (All Participants)</b>
    <MarkdownEditor @text={{this.comp_msg}} />
        <div class="action-buttons">
            <a data-bs-toggle="collapse" href="#comps-holder" class="btn btn-secondary btn-collapse">Cancel</a>
            <button class="btn btn-primary" {{on 'click' this.saveComp}}>Save</button>
        </div>
    </div>
    <div class="log-participants-box">
        
    <div class="icon-gallery">    
      {{#each this.model.participants as |participant|}}
        {{#if (not participant.is_ooc)}}
             <div class="icon-gallery-item">
              <CharIcon @char={{participant}} />
            </div>
        {{/if}}
      {{/each}}
    </div>
    
    </div>
    
    <div class="clearfix"> </div>


</div>

<p><a href="#bottom"><i class="fas fa-angle-double-down"></i> Jump to End</a></p>


<div class="scene-log">
    <AnsiFormat @text={{this.model.log}} />
</div>
    
<a name="bottom"></a>

<br>

<p><a href="#top"><i class="fas fa-angle-double-up"></i> Jump to Top</a></p>

<p>
    <b>Tags:</b>  
    {{#each this.model.tags as |tag|}}
    <LinkTo @route="wiki-tag" @model={{tag}}>{{tag}}</LinkTo>
    {{/each}}
   </p>
   
<p><LinkTo @route="scenes"><i class="fa fa-long-arrow-alt-left" aria-hidden="true"></i> Back to Scenes</LinkTo></p>


      <DropdownMenu @id="sceneMenu" @title="Scene Menu">
          {{#if this.model.can_edit}}

          <li><LinkTo @route="scene-edit" @model={{this.model.id}} class="dropdown-item">Edit Scene</LinkTo></li>
          <li><button {{on 'click' this.unshareScene}}  class="dropdown-item">Unshare Scene</button></li>
          
           <li><hr role="separator" class="dropdown-divider"></li>
         {{/if}}
         
         <LinkTo @route="scene-download" @model={{this.model.id}}  class="dropdown-item">Download Scene</LinkTo>
         <LinkTo @route="scene-source" @models={{array this.model.id this.model.current_version_id}}  class="dropdown-item">View History</LinkTo>
      </DropdownMenu>
      
          
    



<FlashMessages />

{{outlet}}